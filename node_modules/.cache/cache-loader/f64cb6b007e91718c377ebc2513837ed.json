{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\hooks\\graph\\colors.ts","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\hooks\\graph\\colors.ts","mtime":1631029334857},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlVGhlbWF0aWNDb2xvclNjYWxlIH0gZnJvbSAnLi9zY2FsZXMnOwppbXBvcnQgeyB0b0dyYXBoQ29sb3IgfSBmcm9tICdAZ3Jhc3BvbG9naWMvZ3JhcGgnOwppbXBvcnQgeyBDb2xvciB9IGZyb20gJ0B0aGVtYXRpYy9jb2xvcic7CmltcG9ydCB7IFNlbGVjdGlvblN0YXRlIH0gZnJvbSAnQHRoZW1hdGljL2NvcmUnOwppbXBvcnQgeyB1c2VUaGVtYXRpYyB9IGZyb20gJ0B0aGVtYXRpYy9yZWFjdCc7CmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnOwpleHBvcnQgZnVuY3Rpb24gdXNlQmFja2dyb3VuZENvbG9yKGFscGhhID0gMS4wKSB7CiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtYXRpYygpOwogIHJldHVybiB1c2VNZW1vKCgpID0+IHRoZW1lLnBsb3RBcmVhKCkuZmlsbCgpLnJnYmF2KGFscGhhKSwgW3RoZW1lLCBhbHBoYV0pOwp9IC8vIHNvbWV0aW1lcyB3ZSBuZWVkIGFuIGV4cGxpY2l0bHkgaGlkZGVuIGNvbG9yIG9uIHRoZSBncmFwaCwgc28gYWxwaGEgPT0gMAoKZXhwb3J0IGZ1bmN0aW9uIHVzZUhpZGRlbkNvbG9yKCkgewogIHJldHVybiB1c2VNZW1vKCgpID0+IDAsIFtdKTsKfQpleHBvcnQgZnVuY3Rpb24gdXNlSG92ZXJlZE5vZGVDb2xvcigpIHsKICBjb25zdCB0aGVtZSA9IHVzZVRoZW1hdGljKCk7CiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gdGhlbWUuYXBwbGljYXRpb24oKS5lcnJvcigpLnJnYmF2KCksIFt0aGVtZV0pOwp9CmV4cG9ydCBmdW5jdGlvbiB1c2VTZWxlY3RlZE5vZGVDb2xvcigpIHsKICBjb25zdCB0aGVtZSA9IHVzZVRoZW1hdGljKCk7CiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gdGhlbWUubm9kZSgpLmZpbGwoKS5yZ2JhdigpLCBbdGhlbWVdKTsKfQpleHBvcnQgZnVuY3Rpb24gdXNlU3VwcHJlc2VkTm9kZUNvbG9yKCkgewogIGNvbnN0IHRoZW1lID0gdXNlVGhlbWF0aWMoKTsKICByZXR1cm4gdXNlTWVtbygoKSA9PiB0b0dyYXBoQ29sb3IodGhlbWUubm9kZSh7CiAgICBzZWxlY3Rpb25TdGF0ZTogU2VsZWN0aW9uU3RhdGUuTm9EYXRhCiAgfSkuZmlsbCgpLnJnYmF2KCkpLCBbdGhlbWVdKTsKfQpleHBvcnQgZnVuY3Rpb24gdXNlTWluaU1hcE5vZGVDb2xvcigpIHsKICByZXR1cm4gdXNlU3VwcHJlc2VkTm9kZUNvbG9yKCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHVzZUFPSUJvdW5kc0NvbG9yKCkgewogIGNvbnN0IHRoZW1lID0gdXNlVGhlbWF0aWMoKTsKICByZXR1cm4gdXNlTWVtbygoKSA9PiB0aGVtZS5ydWxlKCkuc3Ryb2tlKCkuaGV4KCksIFt0aGVtZV0pOwp9CmNvbnN0IENPTE9SX05PTkUgPSBuZXcgQ29sb3IoJ25vbmUnKTsKZXhwb3J0IGZ1bmN0aW9uIHVzZURhdGFCb3VuZENvbG9yU2NhbGUoZW5jb2RpbmcpIHsKICBjb25zdCBjb2xvclNjYWxlID0gdXNlVGhlbWF0aWNDb2xvclNjYWxlKGVuY29kaW5nKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCgogIGNvbnN0IGNvbG9yQ2FjaGUgPSB1c2VNZW1vKCgpID0+IG5ldyBNYXAoKSwgW2VuY29kaW5nXSk7CiAgcmV0dXJuIHVzZUNhbGxiYWNrKGl0ZW0gPT4gewogICAgaWYgKCFpdGVtIHx8ICFlbmNvZGluZy5maWVsZCkgewogICAgICByZXR1cm4gQ09MT1JfTk9ORTsKICAgIH0KCiAgICBjb25zdCB2YWx1ZSA9IGl0ZW0uZ2V0KGVuY29kaW5nLmZpZWxkKTsKICAgIGxldCBjb2xvciA9IGNvbG9yQ2FjaGUuZ2V0KHZhbHVlKTsKCiAgICBpZiAoY29sb3IgPT0gbnVsbCkgewogICAgICBjb2xvciA9IGNvbG9yU2NhbGUodmFsdWUpOwogICAgICBjb2xvckNhY2hlLnNldCh2YWx1ZSwgY29sb3IpOwogICAgfQoKICAgIHJldHVybiBjb2xvcjsKICB9LCBbZW5jb2RpbmcsIGNvbG9yU2NhbGUsIGNvbG9yQ2FjaGVdKTsKfQ=="},{"version":3,"sources":["C:/ws/graph-drill/src/hooks/graph/colors.ts"],"names":["useThematicColorScale","toGraphColor","Color","SelectionState","useThematic","useCallback","useMemo","useBackgroundColor","alpha","theme","plotArea","fill","rgbav","useHiddenColor","useHoveredNodeColor","application","error","useSelectedNodeColor","node","useSuppresedNodeColor","selectionState","NoData","useMiniMapNodeColor","useAOIBoundsColor","rule","stroke","hex","COLOR_NONE","useDataBoundColorScale","encoding","colorScale","colorCache","Map","item","field","value","get","color","set"],"mappings":"AAAA,SAASA,qBAAT,QAAsC,UAAtC;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,OAArC;AACA,OAAO,SAASC,kBAAT,CAA4BC,KAAK,GAAG,GAApC,EAAyC;AAC5C,QAAMC,KAAK,GAAGL,WAAW,EAAzB;AACA,SAAOE,OAAO,CAAC,MAAMG,KAAK,CAACC,QAAN,GAAiBC,IAAjB,GAAwBC,KAAxB,CAA8BJ,KAA9B,CAAP,EAA6C,CAACC,KAAD,EAAQD,KAAR,CAA7C,CAAd;AACH,C,CACD;;AACA,OAAO,SAASK,cAAT,GAA0B;AAC7B,SAAOP,OAAO,CAAC,MAAM,CAAP,EAAU,EAAV,CAAd;AACH;AACD,OAAO,SAASQ,mBAAT,GAA+B;AAClC,QAAML,KAAK,GAAGL,WAAW,EAAzB;AACA,SAAOE,OAAO,CAAC,MAAMG,KAAK,CAACM,WAAN,GAAoBC,KAApB,GAA4BJ,KAA5B,EAAP,EAA4C,CAACH,KAAD,CAA5C,CAAd;AACH;AACD,OAAO,SAASQ,oBAAT,GAAgC;AACnC,QAAMR,KAAK,GAAGL,WAAW,EAAzB;AACA,SAAOE,OAAO,CAAC,MAAMG,KAAK,CAACS,IAAN,GAAaP,IAAb,GAAoBC,KAApB,EAAP,EAAoC,CAACH,KAAD,CAApC,CAAd;AACH;AACD,OAAO,SAASU,qBAAT,GAAiC;AACpC,QAAMV,KAAK,GAAGL,WAAW,EAAzB;AACA,SAAOE,OAAO,CAAC,MAAML,YAAY,CAACQ,KAAK,CAACS,IAAN,CAAW;AAAEE,IAAAA,cAAc,EAAEjB,cAAc,CAACkB;AAAjC,GAAX,EAAsDV,IAAtD,GAA6DC,KAA7D,EAAD,CAAnB,EAA2F,CAACH,KAAD,CAA3F,CAAd;AACH;AACD,OAAO,SAASa,mBAAT,GAA+B;AAClC,SAAOH,qBAAqB,EAA5B;AACH;AACD,OAAO,SAASI,iBAAT,GAA6B;AAChC,QAAMd,KAAK,GAAGL,WAAW,EAAzB;AACA,SAAOE,OAAO,CAAC,MAAMG,KAAK,CAACe,IAAN,GAAaC,MAAb,GAAsBC,GAAtB,EAAP,EAAoC,CAACjB,KAAD,CAApC,CAAd;AACH;AACD,MAAMkB,UAAU,GAAG,IAAIzB,KAAJ,CAAU,MAAV,CAAnB;AACA,OAAO,SAAS0B,sBAAT,CAAgCC,QAAhC,EAA0C;AAC7C,QAAMC,UAAU,GAAG9B,qBAAqB,CAAC6B,QAAD,CAAxC,CAD6C,CAE7C;;AACA,QAAME,UAAU,GAAGzB,OAAO,CAAC,MAAM,IAAI0B,GAAJ,EAAP,EAAkB,CAACH,QAAD,CAAlB,CAA1B;AACA,SAAOxB,WAAW,CAAE4B,IAAD,IAAU;AACzB,QAAI,CAACA,IAAD,IAAS,CAACJ,QAAQ,CAACK,KAAvB,EAA8B;AAC1B,aAAOP,UAAP;AACH;;AACD,UAAMQ,KAAK,GAAGF,IAAI,CAACG,GAAL,CAASP,QAAQ,CAACK,KAAlB,CAAd;AACA,QAAIG,KAAK,GAAGN,UAAU,CAACK,GAAX,CAAeD,KAAf,CAAZ;;AACA,QAAIE,KAAK,IAAI,IAAb,EAAmB;AACfA,MAAAA,KAAK,GAAGP,UAAU,CAACK,KAAD,CAAlB;AACAJ,MAAAA,UAAU,CAACO,GAAX,CAAeH,KAAf,EAAsBE,KAAtB;AACH;;AACD,WAAOA,KAAP;AACH,GAXiB,EAWf,CAACR,QAAD,EAAWC,UAAX,EAAuBC,UAAvB,CAXe,CAAlB;AAYH","sourcesContent":["import { useThematicColorScale } from './scales';\r\nimport { toGraphColor } from '@graspologic/graph';\r\nimport { Color } from '@thematic/color';\r\nimport { SelectionState } from '@thematic/core';\r\nimport { useThematic } from '@thematic/react';\r\nimport { useCallback, useMemo } from 'react';\r\nexport function useBackgroundColor(alpha = 1.0) {\r\n    const theme = useThematic();\r\n    return useMemo(() => theme.plotArea().fill().rgbav(alpha), [theme, alpha]);\r\n}\r\n// sometimes we need an explicitly hidden color on the graph, so alpha == 0\r\nexport function useHiddenColor() {\r\n    return useMemo(() => 0, []);\r\n}\r\nexport function useHoveredNodeColor() {\r\n    const theme = useThematic();\r\n    return useMemo(() => theme.application().error().rgbav(), [theme]);\r\n}\r\nexport function useSelectedNodeColor() {\r\n    const theme = useThematic();\r\n    return useMemo(() => theme.node().fill().rgbav(), [theme]);\r\n}\r\nexport function useSuppresedNodeColor() {\r\n    const theme = useThematic();\r\n    return useMemo(() => toGraphColor(theme.node({ selectionState: SelectionState.NoData }).fill().rgbav()), [theme]);\r\n}\r\nexport function useMiniMapNodeColor() {\r\n    return useSuppresedNodeColor();\r\n}\r\nexport function useAOIBoundsColor() {\r\n    const theme = useThematic();\r\n    return useMemo(() => theme.rule().stroke().hex(), [theme]);\r\n}\r\nconst COLOR_NONE = new Color('none');\r\nexport function useDataBoundColorScale(encoding) {\r\n    const colorScale = useThematicColorScale(encoding);\r\n    // eslint-disable-next-line\r\n    const colorCache = useMemo(() => new Map(), [encoding]);\r\n    return useCallback((item) => {\r\n        if (!item || !encoding.field) {\r\n            return COLOR_NONE;\r\n        }\r\n        const value = item.get(encoding.field);\r\n        let color = colorCache.get(value);\r\n        if (color == null) {\r\n            color = colorScale(value);\r\n            colorCache.set(value, color);\r\n        }\r\n        return color;\r\n    }, [encoding, colorScale, colorCache]);\r\n}\r\n"]}]}