{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\controls\\HeaderLegend\\Dots.tsx","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\controls\\HeaderLegend\\Dots.tsx","mtime":1631029334831},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlTGVnZW5kQ29sb3JTY2FsZSwgdXNlTGVnZW5kTnVtZXJpY1NjYWxlIH0gZnJvbSAnLi9ob29rcyc7CmltcG9ydCB7IHVzZVRoZW1hdGljIH0gZnJvbSAnQHRoZW1hdGljL3JlYWN0JzsKaW1wb3J0IHsgc2NhbGVMaW5lYXIgfSBmcm9tICdkMy1zY2FsZSc7CmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnOwpleHBvcnQgY29uc3QgRG90cyA9ICh7CiAgY29sb3JFbmNvZGluZywKICBzaXplRW5jb2RpbmcsCiAgb3BhY2l0eUVuY29kaW5nLAogIHdpZHRoID0gMjAwLAogIGhlaWdodCA9IDEwLAogIG1heEl0ZW1zID0gMTAKfSkgPT4gewogIGNvbnN0IHRoZW1lID0gdXNlVGhlbWF0aWMoKTsKICBjb25zdCBjb2xvclNjYWxlID0gdXNlTGVnZW5kQ29sb3JTY2FsZShjb2xvckVuY29kaW5nLCBtYXhJdGVtcywgdGhlbWUuYXBwbGljYXRpb24oKS5oaWdoQ29udHJhc3QoKS5oZXgoKSk7CiAgY29uc3Qgc2l6ZVNjYWxlID0gdXNlTGVnZW5kTnVtZXJpY1NjYWxlKHNpemVFbmNvZGluZywgbWF4SXRlbXMsIGhlaWdodCAvIDIgLSAxKTsKICBjb25zdCBvcGFjaXR5U2NhbGUgPSB1c2VMZWdlbmROdW1lcmljU2NhbGUob3BhY2l0eUVuY29kaW5nLCBtYXhJdGVtcywgMC45KTsKICBjb25zdCBkb3RzID0gdXNlTWVtbygoKSA9PiB7CiAgICBjb25zdCBtaWQgPSBoZWlnaHQgLyAyIC0gMTsKICAgIGNvbnN0IHggPSBzY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgbWF4SXRlbXMgLSAxXSkucmFuZ2UoW21pZCwgd2lkdGggLSBtaWRdKTsKICAgIHJldHVybiBuZXcgQXJyYXkobWF4SXRlbXMpLmZpbGwoMSkubWFwKChfLCBpKSA9PiB7CiAgICAgIGNvbnN0IGZpbGwgPSBjb2xvclNjYWxlKGkpOwogICAgICBjb25zdCByID0gc2l6ZVNjYWxlKGkpOwogICAgICBjb25zdCBvcGFjaXR5ID0gb3BhY2l0eVNjYWxlKGkpOwogICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgiY2lyY2xlIiwgewogICAgICAgIGtleTogYGRvdHMtJHtmaWxsfS0ke3J9LSR7b3BhY2l0eX0tJHtpfWAsCiAgICAgICAgZmlsbDogZmlsbCwKICAgICAgICBmaWxsT3BhY2l0eTogb3BhY2l0eSwKICAgICAgICAvLyB0aW55IGJhY2tncm91bmQgYm9yZGVyIGluIGNhc2Ugb2Ygb3ZlcmxhcAogICAgICAgIHN0cm9rZTogdGhlbWUucGxvdEFyZWEoKS5maWxsKCkuaGV4KCksCiAgICAgICAgc3Ryb2tlV2lkdGg6IDAuNSwKICAgICAgICBjeDogeChpKSwKICAgICAgICBjeTogbWlkLAogICAgICAgIHI6IHIKICAgICAgfSk7CiAgICB9KTsKICB9LCBbdGhlbWUsIHdpZHRoLCBoZWlnaHQsIG1heEl0ZW1zLCBjb2xvclNjYWxlLCBzaXplU2NhbGUsIG9wYWNpdHlTY2FsZV0pOwoKICBpZiAoaGVpZ2h0IDw9IDEpIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHsKICAgIHdpZHRoOiB3aWR0aCwKICAgIGhlaWdodDogaGVpZ2h0CiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudCgiZyIsIG51bGwsIGRvdHMpKTsKfTs="},{"version":3,"sources":["C:/ws/graph-drill/src/controls/HeaderLegend/Dots.tsx"],"names":["useLegendColorScale","useLegendNumericScale","useThematic","scaleLinear","React","useMemo","Dots","colorEncoding","sizeEncoding","opacityEncoding","width","height","maxItems","theme","colorScale","application","highContrast","hex","sizeScale","opacityScale","dots","mid","x","domain","range","Array","fill","map","_","i","r","opacity","createElement","key","fillOpacity","stroke","plotArea","strokeWidth","cx","cy"],"mappings":"AAAA,SAASA,mBAAT,EAA8BC,qBAA9B,QAA2D,SAA3D;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,OAAOC,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,OAAO,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA,aAAF;AAAiBC,EAAAA,YAAjB;AAA+BC,EAAAA,eAA/B;AAAgDC,EAAAA,KAAK,GAAG,GAAxD;AAA6DC,EAAAA,MAAM,GAAG,EAAtE;AAA0EC,EAAAA,QAAQ,GAAG;AAArF,CAAD,KAAgG;AAChH,QAAMC,KAAK,GAAGX,WAAW,EAAzB;AACA,QAAMY,UAAU,GAAGd,mBAAmB,CAACO,aAAD,EAAgBK,QAAhB,EAA0BC,KAAK,CAACE,WAAN,GAAoBC,YAApB,GAAmCC,GAAnC,EAA1B,CAAtC;AACA,QAAMC,SAAS,GAAGjB,qBAAqB,CAACO,YAAD,EAAeI,QAAf,EAAyBD,MAAM,GAAG,CAAT,GAAa,CAAtC,CAAvC;AACA,QAAMQ,YAAY,GAAGlB,qBAAqB,CAACQ,eAAD,EAAkBG,QAAlB,EAA4B,GAA5B,CAA1C;AACA,QAAMQ,IAAI,GAAGf,OAAO,CAAC,MAAM;AACvB,UAAMgB,GAAG,GAAGV,MAAM,GAAG,CAAT,GAAa,CAAzB;AACA,UAAMW,CAAC,GAAGnB,WAAW,GAChBoB,MADK,CACE,CAAC,CAAD,EAAIX,QAAQ,GAAG,CAAf,CADF,EAELY,KAFK,CAEC,CAACH,GAAD,EAAMX,KAAK,GAAGW,GAAd,CAFD,CAAV;AAGA,WAAO,IAAII,KAAJ,CAAUb,QAAV,EAAoBc,IAApB,CAAyB,CAAzB,EAA4BC,GAA5B,CAAgC,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC7C,YAAMH,IAAI,GAAGZ,UAAU,CAACe,CAAD,CAAvB;AACA,YAAMC,CAAC,GAAGZ,SAAS,CAACW,CAAD,CAAnB;AACA,YAAME,OAAO,GAAGZ,YAAY,CAACU,CAAD,CAA5B;AACA,aAAQzB,KAAK,CAAC4B,aAAN,CAAoB,QAApB,EAA8B;AAAEC,QAAAA,GAAG,EAAG,QAAOP,IAAK,IAAGI,CAAE,IAAGC,OAAQ,IAAGF,CAAE,EAAzC;AAA4CH,QAAAA,IAAI,EAAEA,IAAlD;AAAwDQ,QAAAA,WAAW,EAAEH,OAArE;AAClC;AACAI,QAAAA,MAAM,EAAEtB,KAAK,CAACuB,QAAN,GAAiBV,IAAjB,GAAwBT,GAAxB,EAF0B;AAEKoB,QAAAA,WAAW,EAAE,GAFlB;AAEuBC,QAAAA,EAAE,EAAEhB,CAAC,CAACO,CAAD,CAF5B;AAEiCU,QAAAA,EAAE,EAAElB,GAFrC;AAE0CS,QAAAA,CAAC,EAAEA;AAF7C,OAA9B,CAAR;AAGH,KAPM,CAAP;AAQH,GAbmB,EAajB,CAACjB,KAAD,EAAQH,KAAR,EAAeC,MAAf,EAAuBC,QAAvB,EAAiCE,UAAjC,EAA6CI,SAA7C,EAAwDC,YAAxD,CAbiB,CAApB;;AAcA,MAAIR,MAAM,IAAI,CAAd,EAAiB;AACb,WAAO,IAAP;AACH;;AACD,SAAQP,KAAK,CAAC4B,aAAN,CAAoB,KAApB,EAA2B;AAAEtB,IAAAA,KAAK,EAAEA,KAAT;AAAgBC,IAAAA,MAAM,EAAEA;AAAxB,GAA3B,EACJP,KAAK,CAAC4B,aAAN,CAAoB,GAApB,EAAyB,IAAzB,EAA+BZ,IAA/B,CADI,CAAR;AAEH,CAxBM","sourcesContent":["import { useLegendColorScale, useLegendNumericScale } from './hooks';\r\nimport { useThematic } from '@thematic/react';\r\nimport { scaleLinear } from 'd3-scale';\r\nimport React, { useMemo } from 'react';\r\nexport const Dots = ({ colorEncoding, sizeEncoding, opacityEncoding, width = 200, height = 10, maxItems = 10, }) => {\r\n    const theme = useThematic();\r\n    const colorScale = useLegendColorScale(colorEncoding, maxItems, theme.application().highContrast().hex());\r\n    const sizeScale = useLegendNumericScale(sizeEncoding, maxItems, height / 2 - 1);\r\n    const opacityScale = useLegendNumericScale(opacityEncoding, maxItems, 0.9);\r\n    const dots = useMemo(() => {\r\n        const mid = height / 2 - 1;\r\n        const x = scaleLinear()\r\n            .domain([0, maxItems - 1])\r\n            .range([mid, width - mid]);\r\n        return new Array(maxItems).fill(1).map((_, i) => {\r\n            const fill = colorScale(i);\r\n            const r = sizeScale(i);\r\n            const opacity = opacityScale(i);\r\n            return (React.createElement(\"circle\", { key: `dots-${fill}-${r}-${opacity}-${i}`, fill: fill, fillOpacity: opacity, \r\n                // tiny background border in case of overlap\r\n                stroke: theme.plotArea().fill().hex(), strokeWidth: 0.5, cx: x(i), cy: mid, r: r }));\r\n        });\r\n    }, [theme, width, height, maxItems, colorScale, sizeScale, opacityScale]);\r\n    if (height <= 1) {\r\n        return null;\r\n    }\r\n    return (React.createElement(\"svg\", { width: width, height: height },\r\n        React.createElement(\"g\", null, dots)));\r\n};\r\n"]}]}