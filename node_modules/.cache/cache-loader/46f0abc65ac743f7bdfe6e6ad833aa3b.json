{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\controls\\NominalLegend\\VerticalNominalChips.tsx","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\controls\\NominalLegend\\VerticalNominalChips.tsx","mtime":1631029334838},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyohDQogKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcHJvamVjdC4NCiAqLwppbXBvcnQgeyB1c2VUaGVtYXRpY0NvbG9yU2NhbGUgfSBmcm9tICcuLi8uLi9ob29rcy9ncmFwaCc7CmltcG9ydCB7IHVzZVRoZW1hdGljIH0gZnJvbSAnQHRoZW1hdGljL3JlYWN0JzsKaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7CmNvbnN0IElURU1fR0FQID0gMjsKZXhwb3J0IGNvbnN0IFZlcnRpY2FsTm9taW5hbENoaXBzID0gKHsKICBlbmNvZGluZywKICB3aWR0aCA9IDIwMCwKICBoZWlnaHQgPSAxMCwKICBtYXhJdGVtcyA9IDEwCn0pID0+IHsKICBjb25zdCBzY2FsZSA9IHVzZVRoZW1hdGljQ29sb3JTY2FsZShlbmNvZGluZyk7CiAgY29uc3QgewogICAgdW5pcXVlcyA9IFtdCiAgfSA9IGVuY29kaW5nOwogIGNvbnN0IHRoZW1lID0gdXNlVGhlbWF0aWMoKTsgLy8gVE9ETzogaXQgd291bGQgYmUgbXVjaCBuaWNlciBpZiB0aGUgc29ydCBtYXRjaGVkIHRoYXQgb2YgdGhlIGNvbW11bml0eSBsaXN0LAogIC8vIG9yIGF0IGxlYXN0IHRyaWVkIHRvIGJlIGEgY2xlYW4gbnVtZXJpY2FsIHdoZW4gcG9zc2libGUKCiAgY29uc3QgaXRlbXMgPSB1c2VNZW1vKCgpID0+IFsuLi51bmlxdWVzXS5tYXAodiA9PiBgJHt2fWApLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSkuc2xpY2UoMCwgbWF4SXRlbXMpLCBbdW5pcXVlcywgbWF4SXRlbXNdKTsKICBjb25zdCBpdGVtc0hlaWdodCA9IGl0ZW1zLmxlbmd0aCAqIChoZWlnaHQgKyBJVEVNX0dBUCk7IC8vIGFkZCBvbmUgbW9yZSByb3cgZm9yICJtb3JlLi4uIiBsYWJlbCBpZiB0cnVuY2F0ZWQKCiAgY29uc3QgdG90YWxIZWlnaHQgPSBpdGVtcy5sZW5ndGggPCB1bmlxdWVzLmxlbmd0aCA/IGl0ZW1zSGVpZ2h0ICsgaGVpZ2h0IDogaXRlbXNIZWlnaHQ7CiAgY29uc3Qgcm93cyA9IHVzZU1lbW8oKCkgPT4gewogICAgY29uc3QgdGV4dENvbG9yID0gdGhlbWUudGV4dCgpLmZpbGwoKS5oZXgoKTsKICAgIGNvbnN0IHIgPSBoZWlnaHQgLyAyOwogICAgY29uc3QgbGVnZW5kUm93cyA9IGl0ZW1zLm1hcCgoaXRlbSwgaSkgPT4gewogICAgICBjb25zdCBjb2xvciA9IHNjYWxlKGl0ZW0pLmhleCgpOwogICAgICBjb25zdCBjeSA9IHIgKyBpICogKGhlaWdodCArIElURU1fR0FQKTsKICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImciLCB7CiAgICAgICAga2V5OiBgdmVydGljYWwtbm9taW5hbC1jaGlwcy0ke2l0ZW19LSR7aX1gCiAgICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImNpcmNsZSIsIHsKICAgICAgICBmaWxsOiBjb2xvciwKICAgICAgICBjeDogciwKICAgICAgICBjeTogY3ksCiAgICAgICAgcjogcgogICAgICB9KSwgUmVhY3QuY3JlYXRlRWxlbWVudCgidGV4dCIsIHsKICAgICAgICB4OiBoZWlnaHQgKyBJVEVNX0dBUCAqIDIsCiAgICAgICAgeTogY3kgKyBJVEVNX0dBUCwKICAgICAgICBmaWxsOiB0ZXh0Q29sb3IsCiAgICAgICAgZm9udFNpemU6IDEyLAogICAgICAgIGRvbWluYW50QmFzZWxpbmU6ICdtaWRkbGUnCiAgICAgIH0sIGl0ZW0pKTsKICAgIH0pOwogICAgY29uc3QgZGVsdGEgPSB1bmlxdWVzLmxlbmd0aCAtIGl0ZW1zLmxlbmd0aDsKCiAgICBpZiAoZGVsdGEgPiAwKSB7CiAgICAgIGxlZ2VuZFJvd3MucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZXh0IiwgewogICAgICAgIGtleTogYHZlcnRpY2FsLW5vbWluYWwtY2hpcHMtbW9yZS0ke2l0ZW1zLmxlbmd0aH1gLAogICAgICAgIHg6IDIsCiAgICAgICAgeTogaXRlbXMubGVuZ3RoICogKGhlaWdodCArIElURU1fR0FQKSArIHIsCiAgICAgICAgZm9udFNpemU6IDExLAogICAgICAgIGZpbGw6IHRleHRDb2xvciwKICAgICAgICBkb21pbmFudEJhc2VsaW5lOiAnbWlkZGxlJwogICAgICB9LCBgKyR7ZGVsdGF9IG1vcmVgKSk7CiAgICB9CgogICAgcmV0dXJuIGxlZ2VuZFJvd3M7CiAgfSwgW3RoZW1lLCBzY2FsZSwgaGVpZ2h0LCBpdGVtcywgdW5pcXVlc10pOwogIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCB7CiAgICB3aWR0aDogd2lkdGgsCiAgICBoZWlnaHQ6IHRvdGFsSGVpZ2h0CiAgfSwgcm93cyk7Cn07"},{"version":3,"sources":["C:/ws/graph-drill/src/controls/NominalLegend/VerticalNominalChips.tsx"],"names":["useThematicColorScale","useThematic","React","useMemo","ITEM_GAP","VerticalNominalChips","encoding","width","height","maxItems","scale","uniques","theme","items","map","v","sort","a","b","localeCompare","slice","itemsHeight","length","totalHeight","rows","textColor","text","fill","hex","r","legendRows","item","i","color","cy","createElement","key","cx","x","y","fontSize","dominantBaseline","delta","push"],"mappings":"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","sourcesContent":["/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */\r\nimport { useThematicColorScale } from '../../hooks/graph';\r\nimport { useThematic } from '@thematic/react';\r\nimport React, { useMemo } from 'react';\r\nconst ITEM_GAP = 2;\r\nexport const VerticalNominalChips = ({ encoding, width = 200, height = 10, maxItems = 10, }) => {\r\n    const scale = useThematicColorScale(encoding);\r\n    const { uniques = [] } = encoding;\r\n    const theme = useThematic();\r\n    // TODO: it would be much nicer if the sort matched that of the community list,\r\n    // or at least tried to be a clean numerical when possible\r\n    const items = useMemo(() => [...uniques]\r\n        .map(v => `${v}`)\r\n        .sort((a, b) => a.localeCompare(b))\r\n        .slice(0, maxItems), [uniques, maxItems]);\r\n    const itemsHeight = items.length * (height + ITEM_GAP);\r\n    // add one more row for \"more...\" label if truncated\r\n    const totalHeight = items.length < uniques.length ? itemsHeight + height : itemsHeight;\r\n    const rows = useMemo(() => {\r\n        const textColor = theme.text().fill().hex();\r\n        const r = height / 2;\r\n        const legendRows = items.map((item, i) => {\r\n            const color = scale(item).hex();\r\n            const cy = r + i * (height + ITEM_GAP);\r\n            return (React.createElement(\"g\", { key: `vertical-nominal-chips-${item}-${i}` },\r\n                React.createElement(\"circle\", { fill: color, cx: r, cy: cy, r: r }),\r\n                React.createElement(\"text\", { x: height + ITEM_GAP * 2, y: cy + ITEM_GAP, fill: textColor, fontSize: 12, dominantBaseline: 'middle' }, item)));\r\n        });\r\n        const delta = uniques.length - items.length;\r\n        if (delta > 0) {\r\n            legendRows.push(React.createElement(\"text\", { key: `vertical-nominal-chips-more-${items.length}`, x: 2, y: items.length * (height + ITEM_GAP) + r, fontSize: 11, fill: textColor, dominantBaseline: 'middle' }, `+${delta} more`));\r\n        }\r\n        return legendRows;\r\n    }, [theme, scale, height, items, uniques]);\r\n    return (React.createElement(\"svg\", { width: width, height: totalHeight }, rows));\r\n};\r\n"]}]}