{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\state\\vis\\edgeColor.ts","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\state\\vis\\edgeColor.ts","mtime":1631029334899},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgeyB0aGVtZVN0YXRlIH0gZnJvbSAnLi4vc2V0dGluZ3MnOwppbXBvcnQgeyBlZGdlVGFibGVTdGF0ZSB9IGZyb20gJy4uL3RhYmxlcyc7CmltcG9ydCB7IGdldERlZmF1bHRDb2xvck9wdGlvbnMgfSBmcm9tICcuL2NvbmZpZyc7CmltcG9ydCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBhdG9tLCBhdG9tRmFtaWx5LCBzZWxlY3RvckZhbWlseSwgdXNlUmVjb2lsVmFsdWUsIHVzZVNldFJlY29pbFN0YXRlIH0gZnJvbSAncmVjb2lsJzsKaW1wb3J0IHsgZ2V0Q29sdW1uU3RhdHMgfSBmcm9tICd+L2FycXVlcm8nOwpjb25zdCBmaWVsZFN0YXRlID0gYXRvbSh7CiAga2V5OiAnZWRnZS1jb2xvci1lbmNvZGluZy1maWVsZCcsCiAgZGVmYXVsdDogJycKfSk7CmNvbnN0IGVuY29kaW5nU3RhdGUgPSBhdG9tRmFtaWx5KHsKICBrZXk6ICdlZGdlLWNvbG9yLWVuY29kaW5nLXN0YXRlJywKICBkZWZhdWx0OiBzZWxlY3RvckZhbWlseSh7CiAgICBrZXk6ICdlZGdlLWNvbG9yLWVuY29kaW5nLXN0YXRlLWRlZmF1bHQnLAogICAgZ2V0OiBmaWVsZCA9PiAoewogICAgICBnZXQKICAgIH0pID0+IHsKICAgICAgY29uc3QgdGhlbWUgPSBnZXQodGhlbWVTdGF0ZSk7CiAgICAgIGNvbnN0IHRhYmxlID0gZ2V0KGVkZ2VUYWJsZVN0YXRlKTsKICAgICAgY29uc3Qgc3RhdHMgPSBnZXRDb2x1bW5TdGF0cyh0YWJsZSwgZmllbGQpOwogICAgICByZXR1cm4gZ2V0RGVmYXVsdEVkZ2VDb2xvck9wdGlvbnMoc3RhdHMsIHRoZW1lLCBmaWVsZCk7CiAgICB9CiAgfSkKfSk7CmV4cG9ydCBmdW5jdGlvbiB1c2VFZGdlQ29sb3JFbmNvZGluZygpIHsKICBjb25zdCBmaWVsZCA9IHVzZVJlY29pbFZhbHVlKGZpZWxkU3RhdGUpOwogIHJldHVybiB1c2VSZWNvaWxWYWx1ZShlbmNvZGluZ1N0YXRlKGZpZWxkKSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHVzZVVwZGF0ZUVkZ2VDb2xvckVuY29kaW5nKCkgewogIGNvbnN0IGVuY29kaW5nID0gdXNlRWRnZUNvbG9yRW5jb2RpbmcoKTsKICBjb25zdCBzZXR0ZXIgPSB1c2VTZXRSZWNvaWxTdGF0ZShlbmNvZGluZ1N0YXRlKGVuY29kaW5nLmZpZWxkIHx8ICcnKSk7CiAgY29uc3QgZmllbGRTZXR0ZXIgPSB1c2VTZXRSZWNvaWxTdGF0ZShmaWVsZFN0YXRlKTsKICByZXR1cm4gdXNlQ2FsbGJhY2sodXBkYXRlID0+IHsKICAgIGlmICh1cGRhdGUuZmllbGQpIHsKICAgICAgZmllbGRTZXR0ZXIodXBkYXRlLmZpZWxkKTsKICAgIH0gZWxzZSB7CiAgICAgIHNldHRlcihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGVuY29kaW5nKSwgdXBkYXRlKSk7CiAgICB9CiAgfSwgW2VuY29kaW5nLCBzZXR0ZXIsIGZpZWxkU2V0dGVyXSk7Cn0KCmZ1bmN0aW9uIGdldERlZmF1bHRFZGdlQ29sb3JPcHRpb25zKHN0YXRzLCB0aGVtZSwgZmllbGQpIHsKICByZXR1cm4gZ2V0RGVmYXVsdENvbG9yT3B0aW9ucyhmaWVsZCB8fCAnJywgc3RhdHMsIHsKICAgIHZhbHVlOiB0aGVtZS5saW5rKCkuc3Ryb2tlKCkuaGV4KCksCiAgICB0aGVtYXRpY1NjaGVtZVBhdGg6ICdoaWdoQ29udHJhc3RBbm5vdGF0aW9uJwogIH0pOwp9"},{"version":3,"sources":["C:/ws/graph-drill/src/state/vis/edgeColor.ts"],"names":["themeState","edgeTableState","getDefaultColorOptions","useCallback","atom","atomFamily","selectorFamily","useRecoilValue","useSetRecoilState","getColumnStats","fieldState","key","default","encodingState","get","field","theme","table","stats","getDefaultEdgeColorOptions","useEdgeColorEncoding","useUpdateEdgeColorEncoding","encoding","setter","fieldSetter","update","value","link","stroke","hex","thematicSchemePath"],"mappings":";;;;;;AAAA,SAASA,UAAT,QAA2B,aAA3B;AACA,SAASC,cAAT,QAA+B,WAA/B;AACA,SAASC,sBAAT,QAAuC,UAAvC;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,cAA3B,EAA2CC,cAA3C,EAA2DC,iBAA3D,QAAqF,QAArF;AACA,SAASC,cAAT,QAA+B,WAA/B;AACA,MAAMC,UAAU,GAAGN,IAAI,CAAC;AACpBO,EAAAA,GAAG,EAAE,2BADe;AAEpBC,EAAAA,OAAO,EAAE;AAFW,CAAD,CAAvB;AAIA,MAAMC,aAAa,GAAGR,UAAU,CAAC;AAC7BM,EAAAA,GAAG,EAAE,2BADwB;AAE7BC,EAAAA,OAAO,EAAEN,cAAc,CAAC;AACpBK,IAAAA,GAAG,EAAE,mCADe;AAEpBG,IAAAA,GAAG,EAAGC,KAAD,IAAW,CAAC;AAAED,MAAAA;AAAF,KAAD,KAAa;AACzB,YAAME,KAAK,GAAGF,GAAG,CAACd,UAAD,CAAjB;AACA,YAAMiB,KAAK,GAAGH,GAAG,CAACb,cAAD,CAAjB;AACA,YAAMiB,KAAK,GAAGT,cAAc,CAACQ,KAAD,EAAQF,KAAR,CAA5B;AACA,aAAOI,0BAA0B,CAACD,KAAD,EAAQF,KAAR,EAAeD,KAAf,CAAjC;AACH;AAPmB,GAAD;AAFM,CAAD,CAAhC;AAYA,OAAO,SAASK,oBAAT,GAAgC;AACnC,QAAML,KAAK,GAAGR,cAAc,CAACG,UAAD,CAA5B;AACA,SAAOH,cAAc,CAACM,aAAa,CAACE,KAAD,CAAd,CAArB;AACH;AACD,OAAO,SAASM,0BAAT,GAAsC;AACzC,QAAMC,QAAQ,GAAGF,oBAAoB,EAArC;AACA,QAAMG,MAAM,GAAGf,iBAAiB,CAACK,aAAa,CAACS,QAAQ,CAACP,KAAT,IAAkB,EAAnB,CAAd,CAAhC;AACA,QAAMS,WAAW,GAAGhB,iBAAiB,CAACE,UAAD,CAArC;AACA,SAAOP,WAAW,CAAEsB,MAAD,IAAY;AAC3B,QAAIA,MAAM,CAACV,KAAX,EAAkB;AACdS,MAAAA,WAAW,CAACC,MAAM,CAACV,KAAR,CAAX;AACH,KAFD,MAGK;AACDQ,MAAAA,MAAM,iCACCD,QADD,GAECG,MAFD,EAAN;AAIH;AACJ,GAViB,EAUf,CAACH,QAAD,EAAWC,MAAX,EAAmBC,WAAnB,CAVe,CAAlB;AAWH;;AACD,SAASL,0BAAT,CAAoCD,KAApC,EAA2CF,KAA3C,EAAkDD,KAAlD,EAAyD;AACrD,SAAOb,sBAAsB,CAACa,KAAK,IAAI,EAAV,EAAcG,KAAd,EAAqB;AAC9CQ,IAAAA,KAAK,EAAEV,KAAK,CAACW,IAAN,GAAaC,MAAb,GAAsBC,GAAtB,EADuC;AAE9CC,IAAAA,kBAAkB,EAAE;AAF0B,GAArB,CAA7B;AAIH","sourcesContent":["import { themeState } from '../settings';\r\nimport { edgeTableState } from '../tables';\r\nimport { getDefaultColorOptions } from './config';\r\nimport { useCallback } from 'react';\r\nimport { atom, atomFamily, selectorFamily, useRecoilValue, useSetRecoilState, } from 'recoil';\r\nimport { getColumnStats } from '~/arquero';\r\nconst fieldState = atom({\r\n    key: 'edge-color-encoding-field',\r\n    default: '',\r\n});\r\nconst encodingState = atomFamily({\r\n    key: 'edge-color-encoding-state',\r\n    default: selectorFamily({\r\n        key: 'edge-color-encoding-state-default',\r\n        get: (field) => ({ get }) => {\r\n            const theme = get(themeState);\r\n            const table = get(edgeTableState);\r\n            const stats = getColumnStats(table, field);\r\n            return getDefaultEdgeColorOptions(stats, theme, field);\r\n        },\r\n    }),\r\n});\r\nexport function useEdgeColorEncoding() {\r\n    const field = useRecoilValue(fieldState);\r\n    return useRecoilValue(encodingState(field));\r\n}\r\nexport function useUpdateEdgeColorEncoding() {\r\n    const encoding = useEdgeColorEncoding();\r\n    const setter = useSetRecoilState(encodingState(encoding.field || ''));\r\n    const fieldSetter = useSetRecoilState(fieldState);\r\n    return useCallback((update) => {\r\n        if (update.field) {\r\n            fieldSetter(update.field);\r\n        }\r\n        else {\r\n            setter({\r\n                ...encoding,\r\n                ...update,\r\n            });\r\n        }\r\n    }, [encoding, setter, fieldSetter]);\r\n}\r\nfunction getDefaultEdgeColorOptions(stats, theme, field) {\r\n    return getDefaultColorOptions(field || '', stats, {\r\n        value: theme.link().stroke().hex(),\r\n        thematicSchemePath: 'highContrastAnnotation',\r\n    });\r\n}\r\n"]}]}