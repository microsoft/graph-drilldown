{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\components\\App\\hooks\\useTestFiles.ts","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\components\\App\\hooks\\useTestFiles.ts","mtime":1631034960474},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgovKiENCiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLg0KICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRSBmaWxlIGluIHRoZSBwcm9qZWN0Lg0KICovCmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgZmV0Y2hVcmwgfSBmcm9tICd+L2FwaSc7CmltcG9ydCB7IHVzZVNldEFycXVlcm9CaWdUYWJsZSwgdXNlU2V0QXJxdWVyb0VkZ2VUYWJsZSB9IGZyb20gJ34vYXJxdWVybyc7CmltcG9ydCB7IGluaXRpYWxpemVFZGdlVGFibGUsIGluaXRpYWxpemVKb2luVGFibGUsIGluaXRpYWxpemVOb2RlVGFibGUsIGpvaW5EYXRhVGFibGVzLCBqb2luTm9kZUNvbW11bml0eVRhYmxlcyB9IGZyb20gJ34vYXJxdWVyby90YWJsZSc7CmltcG9ydCB7IHVzZVNldEZpbGVzIH0gZnJvbSAnfi9zdGF0ZSc7Ci8qKg0KICogTG9hZHMgYSBzZXQgb2YgcHJlLWRlZmluZWQgdGVzdCBmaWxlcywgZWl0aGVyIHNwZWNpZmllZCBvbiB0aGUgVVJMDQogKiBvciBhcyBhIHByZXNldCBidW5kbGUuDQogKi8KCmV4cG9ydCBmdW5jdGlvbiB1c2VUZXN0RmlsZXMoYnVuZGxlKSB7CiAgY29uc3Qgc2V0Tm9kZXMgPSB1c2VTZXRBcnF1ZXJvQmlnVGFibGUoKTsKICBjb25zdCBzZXRFZGdlcyA9IHVzZVNldEFycXVlcm9FZGdlVGFibGUoKTsKICBjb25zdCBzZXRGaWxlcyA9IHVzZVNldEZpbGVzKCk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IGYgPSBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnNvbGUudGltZSgnbG9hZCcpOwogICAgICBjb25zdCBub2Rlc0ZpbGUgPSBidW5kbGUubm9kZXM7CiAgICAgIGNvbnN0IGpvaW5GaWxlID0gYnVuZGxlLmpvaW47CiAgICAgIGNvbnN0IGNvbW11bml0aWVzRmlsZSA9IGJ1bmRsZS5jb21tdW5pdGllczsKICAgICAgY29uc3QgZWRnZXNGaWxlID0gYnVuZGxlLmVkZ2VzOwogICAgICBjb25zdCBmaWxlcyA9IHt9OwogICAgICBjb25zdCBbbm9kZXNUYWJsZSwgam9pblRhYmxlLCBjb21tdW5pdGllc1RhYmxlLCBlZGdlc1RhYmxlXSA9IGF3YWl0IFByb21pc2UuYWxsKFsobm9kZXNGaWxlID09PSBudWxsIHx8IG5vZGVzRmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbm9kZXNGaWxlLnVybCkgJiYgZmV0Y2hVcmwobm9kZXNGaWxlLnVybCksIChqb2luRmlsZSA9PT0gbnVsbCB8fCBqb2luRmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogam9pbkZpbGUudXJsKSAmJiBmZXRjaFVybChqb2luRmlsZS51cmwpLCAoY29tbXVuaXRpZXNGaWxlID09PSBudWxsIHx8IGNvbW11bml0aWVzRmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tbXVuaXRpZXNGaWxlLnVybCkgJiYgZmV0Y2hVcmwoY29tbXVuaXRpZXNGaWxlLnVybCksIChlZGdlc0ZpbGUgPT09IG51bGwgfHwgZWRnZXNGaWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlZGdlc0ZpbGUudXJsKSAmJiBmZXRjaFVybChlZGdlc0ZpbGUudXJsKV0pOwogICAgICBsZXQgbm9kZXM7CiAgICAgIGxldCBlZGdlczsgLy8gVE9ETzogdGhpcyBpcyBiYXNpY2FsbHkganVzdCByZWNyZWF0aW5nIHRoZSBsb2dpYyBpbiB1c2VBcnF1ZXJvQWRkVGFibGUgaG9vawogICAgICAvLyBob3dldmVyLCB3ZSBoYXZlIHRvIGRvIGFsbCB0aGUgam9pbnMgYW5kIHNldCB0aGUgdGFibGVzIGF0IG9uY2UgYmVjYXVzZSB3ZSB3b24ndCBnZXQgYW5vdGhlciByZW5kZXIgbG9vcAogICAgICAvLyBub3RlIHRoYXQgdGhlIG9yZGVyIG9mIG5vZGVzIC0+IGpvaW4gLT4gY29tbXVuaXRpZXMgLT4gZWRnZXMgaXMgKnJlcXVpcmVkKiB0byBsYXllciBwcm9wZXJseQoKICAgICAgaWYgKG5vZGVzRmlsZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIG5vZGVzIGZpbGUgZnJvbSB1cmwnLCBub2Rlc0ZpbGUudXJsKTsKICAgICAgICBjb25zb2xlLnRpbWUoJ25vZGVzJyk7CiAgICAgICAgbm9kZXMgPSBpbml0aWFsaXplTm9kZVRhYmxlKG5vZGVzVGFibGUpOwogICAgICAgIGZpbGVzLm5vZGVzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBub2Rlc0ZpbGUpLCB7fSwgewogICAgICAgICAgdGFibGU6IG5vZGVzVGFibGUsCiAgICAgICAgICByb3dzOiBub2Rlc1RhYmxlLm51bVJvd3MoKQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUudGltZUVuZCgnbm9kZXMnKTsKICAgICAgfQoKICAgICAgaWYgKGpvaW5GaWxlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgam9pbiBmaWxlIGZyb20gdXJsJywgam9pbkZpbGUudXJsKTsKICAgICAgICBjb25zb2xlLnRpbWUoJ2pvaW4nKTsKICAgICAgICBjb25zdCBqb2luID0gaW5pdGlhbGl6ZUpvaW5UYWJsZShqb2luVGFibGUpOwogICAgICAgIGZpbGVzLmpvaW4gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGpvaW5GaWxlKSwge30sIHsKICAgICAgICAgIHRhYmxlOiBqb2luVGFibGUsCiAgICAgICAgICByb3dzOiBqb2luLm51bVJvd3MoKQogICAgICAgIH0pOwoKICAgICAgICBpZiAobm9kZXNGaWxlKSB7CiAgICAgICAgICBub2RlcyA9IGpvaW5Ob2RlQ29tbXVuaXR5VGFibGVzKG5vZGVzLCBqb2luKTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUudGltZUVuZCgnam9pbicpOwogICAgICB9CgogICAgICBpZiAoY29tbXVuaXRpZXNGaWxlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgY29tbXVuaXRpZXMgZmlsZSBmcm9tIHVybCcsIGNvbW11bml0aWVzRmlsZS51cmwpOwogICAgICAgIGNvbnNvbGUudGltZSgnY29tbXVuaXRpZXMnKTsKICAgICAgICBmaWxlcy5jb21tdW5pdGllcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29tbXVuaXRpZXNGaWxlKSwge30sIHsKICAgICAgICAgIHRhYmxlOiBjb21tdW5pdGllc1RhYmxlLAogICAgICAgICAgcm93czogY29tbXVuaXRpZXNUYWJsZS5udW1Sb3dzKCkKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG5vZGVzRmlsZSAmJiBqb2luRmlsZSkgewogICAgICAgICAgbm9kZXMgPSBqb2luRGF0YVRhYmxlcyhub2RlcywgY29tbXVuaXRpZXNUYWJsZSwgJ2NvbW11bml0eScpOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS50aW1lRW5kKCdjb21tdW5pdGllcycpOwogICAgICB9CgogICAgICBpZiAoZWRnZXNGaWxlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgZWRnZXMgZmlsZSBmcm9tIHVybCcsIGVkZ2VzRmlsZS51cmwpOwogICAgICAgIGNvbnNvbGUudGltZSgnZWRnZXMnKTsKICAgICAgICBlZGdlcyA9IGluaXRpYWxpemVFZGdlVGFibGUoZWRnZXNUYWJsZSk7CiAgICAgICAgZmlsZXMuZWRnZXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGVkZ2VzRmlsZSksIHt9LCB7CiAgICAgICAgICB0YWJsZTogZWRnZXNUYWJsZSwKICAgICAgICAgIHJvd3M6IGVkZ2VzVGFibGUubnVtUm93cygpCiAgICAgICAgfSk7CgogICAgICAgIGlmICghbm9kZXNGaWxlKSB7CiAgICAgICAgICBub2RlcyA9IGluaXRpYWxpemVOb2RlVGFibGUoZWRnZXNUYWJsZSwgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ2VkZ2VzJyk7CiAgICAgIH0KCiAgICAgIGlmIChub2RlcykgewogICAgICAgIGNvbnNvbGUubG9nKCdub2RlcyBiaWd0YWJsZScpOwogICAgICAgIG5vZGVzLnByaW50KCk7CiAgICAgICAgc2V0Tm9kZXMobm9kZXMpOwogICAgICB9CgogICAgICBpZiAoZWRnZXMpIHsKICAgICAgICBjb25zb2xlLmxvZygnZWRnZXMnKTsKICAgICAgICBlZGdlcy5wcmludCgpOwogICAgICAgIHNldEVkZ2VzKGVkZ2VzKTsKICAgICAgfQoKICAgICAgY29uc29sZS50aW1lRW5kKCdsb2FkJyk7CiAgICAgIHNldEZpbGVzKE9iamVjdC52YWx1ZXMoZmlsZXMpKTsKICAgIH07CgogICAgZigpOwogIH0sIFtidW5kbGUsIHNldE5vZGVzLCBzZXRFZGdlcywgc2V0RmlsZXNdKTsKfQ=="},{"version":3,"sources":["C:/ws/graph-drill/src/components/App/hooks/useTestFiles.ts"],"names":["useEffect","fetchUrl","useSetArqueroBigTable","useSetArqueroEdgeTable","initializeEdgeTable","initializeJoinTable","initializeNodeTable","joinDataTables","joinNodeCommunityTables","useSetFiles","useTestFiles","bundle","setNodes","setEdges","setFiles","f","console","time","nodesFile","nodes","joinFile","join","communitiesFile","communities","edgesFile","edges","files","nodesTable","joinTable","communitiesTable","edgesTable","Promise","all","url","log","table","rows","numRows","timeEnd","print","Object","values"],"mappings":"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","sourcesContent":["/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */\r\nimport { useEffect } from 'react';\r\nimport { fetchUrl } from '~/api';\r\nimport { useSetArqueroBigTable, useSetArqueroEdgeTable } from '~/arquero';\r\nimport { initializeEdgeTable, initializeJoinTable, initializeNodeTable, joinDataTables, joinNodeCommunityTables, } from '~/arquero/table';\r\nimport { useSetFiles } from '~/state';\r\n/**\r\n * Loads a set of pre-defined test files, either specified on the URL\r\n * or as a preset bundle.\r\n */\r\nexport function useTestFiles(bundle) {\r\n    const setNodes = useSetArqueroBigTable();\r\n    const setEdges = useSetArqueroEdgeTable();\r\n    const setFiles = useSetFiles();\r\n    useEffect(() => {\r\n        const f = async () => {\r\n            console.time('load');\r\n            const nodesFile = bundle.nodes;\r\n            const joinFile = bundle.join;\r\n            const communitiesFile = bundle.communities;\r\n            const edgesFile = bundle.edges;\r\n            const files = {};\r\n            const [nodesTable, joinTable, communitiesTable, edgesTable] = await Promise.all([\r\n                nodesFile?.url && fetchUrl(nodesFile.url),\r\n                joinFile?.url && fetchUrl(joinFile.url),\r\n                communitiesFile?.url && fetchUrl(communitiesFile.url),\r\n                edgesFile?.url && fetchUrl(edgesFile.url),\r\n            ]);\r\n            let nodes;\r\n            let edges;\r\n            // TODO: this is basically just recreating the logic in useArqueroAddTable hook\r\n            // however, we have to do all the joins and set the tables at once because we won't get another render loop\r\n            // note that the order of nodes -> join -> communities -> edges is *required* to layer properly\r\n            if (nodesFile) {\r\n                console.log('loading nodes file from url', nodesFile.url);\r\n                console.time('nodes');\r\n                nodes = initializeNodeTable(nodesTable);\r\n                files.nodes = {\r\n                    ...nodesFile,\r\n                    table: nodesTable,\r\n                    rows: nodesTable.numRows(),\r\n                };\r\n                console.timeEnd('nodes');\r\n            }\r\n            if (joinFile) {\r\n                console.log('loading join file from url', joinFile.url);\r\n                console.time('join');\r\n                const join = initializeJoinTable(joinTable);\r\n                files.join = {\r\n                    ...joinFile,\r\n                    table: joinTable,\r\n                    rows: join.numRows(),\r\n                };\r\n                if (nodesFile) {\r\n                    nodes = joinNodeCommunityTables(nodes, join);\r\n                }\r\n                console.timeEnd('join');\r\n            }\r\n            if (communitiesFile) {\r\n                console.log('loading communities file from url', communitiesFile.url);\r\n                console.time('communities');\r\n                files.communities = {\r\n                    ...communitiesFile,\r\n                    table: communitiesTable,\r\n                    rows: communitiesTable.numRows(),\r\n                };\r\n                if (nodesFile && joinFile) {\r\n                    nodes = joinDataTables(nodes, communitiesTable, 'community');\r\n                }\r\n                console.timeEnd('communities');\r\n            }\r\n            if (edgesFile) {\r\n                console.log('loading edges file from url', edgesFile.url);\r\n                console.time('edges');\r\n                edges = initializeEdgeTable(edgesTable);\r\n                files.edges = {\r\n                    ...edgesFile,\r\n                    table: edgesTable,\r\n                    rows: edgesTable.numRows(),\r\n                };\r\n                if (!nodesFile) {\r\n                    nodes = initializeNodeTable(edgesTable, true);\r\n                }\r\n                console.timeEnd('edges');\r\n            }\r\n            if (nodes) {\r\n                console.log('nodes bigtable');\r\n                nodes.print();\r\n                setNodes(nodes);\r\n            }\r\n            if (edges) {\r\n                console.log('edges');\r\n                edges.print();\r\n                setEdges(edges);\r\n            }\r\n            console.timeEnd('load');\r\n            setFiles(Object.values(files));\r\n        };\r\n        f();\r\n    }, [bundle, setNodes, setEdges, setFiles]);\r\n}\r\n"]}]}