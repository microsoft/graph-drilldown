{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\controls\\HeaderLegend\\HeaderLegend.tsx","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\controls\\HeaderLegend\\HeaderLegend.tsx","mtime":1631029334833},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyohDQogKiBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcHJvamVjdC4NCiAqLwppbXBvcnQgeyBEYXRhQmluZGluZyB9IGZyb20gJy4uLy4uL3R5cGVzJzsKaW1wb3J0IHsgQ29sb3JSYW5nZVRleHQgfSBmcm9tICcuL0NvbG9yUmFuZ2VUZXh0JzsKaW1wb3J0IHsgRGFzaGVzIH0gZnJvbSAnLi9EYXNoZXMnOwppbXBvcnQgeyBEb3RzIH0gZnJvbSAnLi9Eb3RzJzsKaW1wb3J0IHsgTGVnZW5kTGFiZWwgfSBmcm9tICcuL0xlZ2VuZExhYmVsJzsKaW1wb3J0IHsgTnVtZXJpY1JhbmdlVGV4dCB9IGZyb20gJy4vTnVtZXJpY1JhbmdlVGV4dCc7CmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJzsgLy8gVE9ETzogd2lkdGggc2hvdWxkIGZsZXgKCmNvbnN0IExFR0VORF9XSURUSCA9IDI2MDsKY29uc3QgTEVHRU5EX0hFSUdIVCA9IDIwOwpjb25zdCBMRUdFTkRfSVRFTVMgPSAxMTsKY29uc3QgUkFOR0VfSEVJR0hUID0gMTI7Ci8qKg0KICogQSBjb21wYWN0IGhvcml6b250YWwgbGVnZW5kIGRlc2lnbmVkIHRvIGZpdCBpbiBwYW5lbCBoZWFkZXJzLg0KICogQHBhcmFtIHBhcmFtMA0KICovCgpleHBvcnQgY29uc3QgSGVhZGVyTGVnZW5kID0gKHsKICBsYWJlbCwKICBlbmNvZGluZywKICBjb2xvckVuY29kaW5nLAogIHNpemVFbmNvZGluZywKICBvcGFjaXR5RW5jb2RpbmcsCiAgaXNVbnNldCwKICBpc0Rhc2hlcywKICBpc051bWVyaWMKfSkgPT4gewogIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRhaW5lciwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChMZWdlbmRMYWJlbCwgewogICAgbGFiZWw6IGxhYmVsLAogICAgYmluZGluZzogZW5jb2RpbmcuYmluZGluZywKICAgIGZpZWxkOiBlbmNvZGluZy5maWVsZCwKICAgIGZpeGVkVmFsdWU6IGAke2VuY29kaW5nLnZhbHVlfWAsCiAgICBwYWxldHRlVmFsdWU6ICdmcm9tIHBhbGV0dGUnLAogICAgdW5zZXQ6IGlzVW5zZXQKICB9KSwgIWlzVW5zZXQgPyBSZWFjdC5jcmVhdGVFbGVtZW50KExlZ2VuZCwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChMYWJlbGVkTGVnZW5kLCB7CiAgICBsYWJlbDogbGFiZWwsCiAgICBlbmNvZGluZzogZW5jb2RpbmcsCiAgICBjb2xvckVuY29kaW5nOiBjb2xvckVuY29kaW5nLAogICAgc2l6ZUVuY29kaW5nOiBzaXplRW5jb2RpbmcsCiAgICBvcGFjaXR5RW5jb2Rpbmc6IG9wYWNpdHlFbmNvZGluZywKICAgIGlzRGFzaGVzOiBpc0Rhc2hlcywKICAgIGlzTnVtZXJpYzogaXNOdW1lcmljCiAgfSkpIDogbnVsbCk7Cn07Cgpjb25zdCBMYWJlbGVkTGVnZW5kID0gKHsKICBlbmNvZGluZywKICBjb2xvckVuY29kaW5nLAogIHNpemVFbmNvZGluZywKICBvcGFjaXR5RW5jb2RpbmcsCiAgaXNEYXNoZXMsCiAgaXNOdW1lcmljCn0pID0+IHsKICBjb25zdCBmaXhlZCA9IHVzZU1lbW8oKCkgPT4gZW5jb2RpbmcuYmluZGluZyAhPT0gRGF0YUJpbmRpbmcuU2NhbGVkLCBbZW5jb2RpbmddKTsKICBjb25zdCBoZWlnaHQgPSB1c2VNZW1vKCgpID0+IGZpeGVkID8gTEVHRU5EX0hFSUdIVCA6IExFR0VORF9IRUlHSFQgKyBSQU5HRV9IRUlHSFQgKyA0LCBbZml4ZWRdKTsKICBjb25zdCBNYXJrcyA9IGlzRGFzaGVzID8gRGFzaGVzIDogRG90czsKICBjb25zdCByYW5nZVRleHQgPSB1c2VSYW5nZVRleHQoZW5jb2RpbmcsIGlzTnVtZXJpYyk7CiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGVnZW5kQ29udGFpbmVyLCB7CiAgICB3aWR0aDogTEVHRU5EX1dJRFRILAogICAgaGVpZ2h0OiBoZWlnaHQKICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KExlZ2VuZFNlY3Rpb24sIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWFya3MsIHsKICAgIGNvbG9yRW5jb2Rpbmc6IGNvbG9yRW5jb2RpbmcsCiAgICBzaXplRW5jb2Rpbmc6IHNpemVFbmNvZGluZywKICAgIG9wYWNpdHlFbmNvZGluZzogb3BhY2l0eUVuY29kaW5nLAogICAgd2lkdGg6IExFR0VORF9XSURUSCwKICAgIGhlaWdodDogTEVHRU5EX0hFSUdIVCwKICAgIG1heEl0ZW1zOiBMRUdFTkRfSVRFTVMKICB9KSksICFmaXhlZCA/IHJhbmdlVGV4dCA6IG51bGwpOwp9OwoKZnVuY3Rpb24gdXNlUmFuZ2VUZXh0KGVuY29kaW5nLCBpc051bWVyaWMpIHsKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSYW5nZVNlY3Rpb24sIG51bGwsIGlzTnVtZXJpYyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTnVtZXJpY1JhbmdlVGV4dCwgewogICAgaW5jbHVkZU1pZHBvaW50OiB0cnVlLAogICAgZG9tYWluOiBlbmNvZGluZy5kb21haW4KICB9KSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sb3JSYW5nZVRleHQsIHsKICAgIGVuY29kaW5nOiBlbmNvZGluZywKICAgIGluY2x1ZGVNaWRwb2ludDogdHJ1ZQogIH0pKTsKfQoKY29uc3QgQ29udGFpbmVyID0gc3R5bGVkLmRpdmAKCW1hcmdpbjogMnB4OwoJbWFyZ2luLWxlZnQ6IDRweDsKYDsKY29uc3QgTGVnZW5kQ29udGFpbmVyID0gc3R5bGVkLmRpdmAKCWRpc3BsYXk6IGZsZXg7CglmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoJanVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwoJd2lkdGg6ICR7KHsKICB3aWR0aAp9KSA9PiB3aWR0aH1weDsKCWhlaWdodDogJHsoewogIGhlaWdodAp9KSA9PiBoZWlnaHR9cHg7CglwYWRkaW5nOiA0cHg7Cglib3JkZXItcmFkaXVzOiAycHg7Cgljb2xvcjogJHsoewogIHRoZW1lCn0pID0+IHRoZW1lLnRleHQoKS5maWxsKCkuaGV4KCl9OwoJYmFja2dyb3VuZC1jb2xvcjogJHsoewogIHRoZW1lCn0pID0+IHRoZW1lLnBsb3RBcmVhKCkuZmlsbCgpLmhleCgpfTsKCWJvcmRlcjogMXB4IHNvbGlkICR7KHsKICB0aGVtZQp9KSA9PiB0aGVtZS5wbG90QXJlYSgpLnN0cm9rZSgpLmhleCgpfTsKYDsKY29uc3QgTGVnZW5kID0gc3R5bGVkLmRpdmAKCW1hcmdpbi10b3A6IDhweDsKCW1hcmdpbi1ib3R0b206IDRweDsKYDsKY29uc3QgTGVnZW5kU2VjdGlvbiA9IHN0eWxlZC5kaXZgCgloZWlnaHQ6ICR7TEVHRU5EX0hFSUdIVH1weDsKYDsKY29uc3QgUmFuZ2VTZWN0aW9uID0gc3R5bGVkLmRpdmAKCWhlaWdodDogJHtSQU5HRV9IRUlHSFR9cHg7CmA7"},{"version":3,"sources":["C:/ws/graph-drill/src/controls/HeaderLegend/HeaderLegend.tsx"],"names":["DataBinding","ColorRangeText","Dashes","Dots","LegendLabel","NumericRangeText","React","useMemo","styled","LEGEND_WIDTH","LEGEND_HEIGHT","LEGEND_ITEMS","RANGE_HEIGHT","HeaderLegend","label","encoding","colorEncoding","sizeEncoding","opacityEncoding","isUnset","isDashes","isNumeric","createElement","Container","binding","field","fixedValue","value","paletteValue","unset","Legend","LabeledLegend","fixed","Scaled","height","Marks","rangeText","useRangeText","LegendContainer","width","LegendSection","maxItems","RangeSection","includeMidpoint","domain","div","theme","text","fill","hex","plotArea","stroke"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AACA,OAAOC,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,mBAAnB,C,CACA;;AACA,MAAMC,YAAY,GAAG,GAArB;AACA,MAAMC,aAAa,GAAG,EAAtB;AACA,MAAMC,YAAY,GAAG,EAArB;AACA,MAAMC,YAAY,GAAG,EAArB;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,QAAT;AAAmBC,EAAAA,aAAnB;AAAkCC,EAAAA,YAAlC;AAAgDC,EAAAA,eAAhD;AAAiEC,EAAAA,OAAjE;AAA0EC,EAAAA,QAA1E;AAAoFC,EAAAA;AAApF,CAAD,KAAsG;AAC9H,SAAQf,KAAK,CAACgB,aAAN,CAAoBC,SAApB,EAA+B,IAA/B,EACJjB,KAAK,CAACgB,aAAN,CAAoBlB,WAApB,EAAiC;AAAEU,IAAAA,KAAK,EAAEA,KAAT;AAAgBU,IAAAA,OAAO,EAAET,QAAQ,CAACS,OAAlC;AAA2CC,IAAAA,KAAK,EAAEV,QAAQ,CAACU,KAA3D;AAAkEC,IAAAA,UAAU,EAAG,GAAEX,QAAQ,CAACY,KAAM,EAAhG;AAAmGC,IAAAA,YAAY,EAAE,cAAjH;AAAiIC,IAAAA,KAAK,EAAEV;AAAxI,GAAjC,CADI,EAEJ,CAACA,OAAD,GAAYb,KAAK,CAACgB,aAAN,CAAoBQ,MAApB,EAA4B,IAA5B,EACRxB,KAAK,CAACgB,aAAN,CAAoBS,aAApB,EAAmC;AAAEjB,IAAAA,KAAK,EAAEA,KAAT;AAAgBC,IAAAA,QAAQ,EAAEA,QAA1B;AAAoCC,IAAAA,aAAa,EAAEA,aAAnD;AAAkEC,IAAAA,YAAY,EAAEA,YAAhF;AAA8FC,IAAAA,eAAe,EAAEA,eAA/G;AAAgIE,IAAAA,QAAQ,EAAEA,QAA1I;AAAoJC,IAAAA,SAAS,EAAEA;AAA/J,GAAnC,CADQ,CAAZ,GACuN,IAHnN,CAAR;AAIH,CALM;;AAMP,MAAMU,aAAa,GAAG,CAAC;AAAEhB,EAAAA,QAAF;AAAYC,EAAAA,aAAZ;AAA2BC,EAAAA,YAA3B;AAAyCC,EAAAA,eAAzC;AAA0DE,EAAAA,QAA1D;AAAoEC,EAAAA;AAApE,CAAD,KAAsF;AACxG,QAAMW,KAAK,GAAGzB,OAAO,CAAC,MAAMQ,QAAQ,CAACS,OAAT,KAAqBxB,WAAW,CAACiC,MAAxC,EAAgD,CAAClB,QAAD,CAAhD,CAArB;AACA,QAAMmB,MAAM,GAAG3B,OAAO,CAAC,MAAOyB,KAAK,GAAGtB,aAAH,GAAmBA,aAAa,GAAGE,YAAhB,GAA+B,CAA/D,EAAmE,CAACoB,KAAD,CAAnE,CAAtB;AACA,QAAMG,KAAK,GAAGf,QAAQ,GAAGlB,MAAH,GAAYC,IAAlC;AACA,QAAMiC,SAAS,GAAGC,YAAY,CAACtB,QAAD,EAAWM,SAAX,CAA9B;AACA,SAAQf,KAAK,CAACgB,aAAN,CAAoBgB,eAApB,EAAqC;AAAEC,IAAAA,KAAK,EAAE9B,YAAT;AAAuByB,IAAAA,MAAM,EAAEA;AAA/B,GAArC,EACJ5B,KAAK,CAACgB,aAAN,CAAoBkB,aAApB,EAAmC,IAAnC,EACIlC,KAAK,CAACgB,aAAN,CAAoBa,KAApB,EAA2B;AAAEnB,IAAAA,aAAa,EAAEA,aAAjB;AAAgCC,IAAAA,YAAY,EAAEA,YAA9C;AAA4DC,IAAAA,eAAe,EAAEA,eAA7E;AAA8FqB,IAAAA,KAAK,EAAE9B,YAArG;AAAmHyB,IAAAA,MAAM,EAAExB,aAA3H;AAA0I+B,IAAAA,QAAQ,EAAE9B;AAApJ,GAA3B,CADJ,CADI,EAGJ,CAACqB,KAAD,GAASI,SAAT,GAAqB,IAHjB,CAAR;AAIH,CATD;;AAUA,SAASC,YAAT,CAAsBtB,QAAtB,EAAgCM,SAAhC,EAA2C;AACvC,SAAQf,KAAK,CAACgB,aAAN,CAAoBoB,YAApB,EAAkC,IAAlC,EAAwCrB,SAAS,GAAIf,KAAK,CAACgB,aAAN,CAAoBjB,gBAApB,EAAsC;AAAEsC,IAAAA,eAAe,EAAE,IAAnB;AAAyBC,IAAAA,MAAM,EAAE7B,QAAQ,CAAC6B;AAA1C,GAAtC,CAAJ,GAAkGtC,KAAK,CAACgB,aAAN,CAAoBrB,cAApB,EAAoC;AAAEc,IAAAA,QAAQ,EAAEA,QAAZ;AAAsB4B,IAAAA,eAAe,EAAE;AAAvC,GAApC,CAAnJ,CAAR;AACH;;AACD,MAAMpB,SAAS,GAAGf,MAAM,CAACqC,GAAK;AAC9B;AACA;AACA,CAHA;AAIA,MAAMP,eAAe,GAAG9B,MAAM,CAACqC,GAAK;AACpC;AACA;AACA;AACA,UAAU,CAAC;AAAEN,EAAAA;AAAF,CAAD,KAAeA,KAAM;AAC/B,WAAW,CAAC;AAAEL,EAAAA;AAAF,CAAD,KAAgBA,MAAO;AAClC;AACA;AACA,UAAU,CAAC;AAAEY,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,IAAN,GAAaC,IAAb,GAAoBC,GAApB,EAA0B;AACnD,qBAAqB,CAAC;AAAEH,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACI,QAAN,GAAiBF,IAAjB,GAAwBC,GAAxB,EAA8B;AAClE,qBAAqB,CAAC;AAAEH,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACI,QAAN,GAAiBC,MAAjB,GAA0BF,GAA1B,EAAgC;AACpE,CAXA;AAYA,MAAMnB,MAAM,GAAGtB,MAAM,CAACqC,GAAK;AAC3B;AACA;AACA,CAHA;AAIA,MAAML,aAAa,GAAGhC,MAAM,CAACqC,GAAK;AAClC,WAAWnC,aAAc;AACzB,CAFA;AAGA,MAAMgC,YAAY,GAAGlC,MAAM,CAACqC,GAAK;AACjC,WAAWjC,YAAa;AACxB,CAFA","sourcesContent":["/*!\r\n * Copyright (c) Microsoft. All rights reserved.\r\n * Licensed under the MIT license. See LICENSE file in the project.\r\n */\r\nimport { DataBinding } from '../../types';\r\nimport { ColorRangeText } from './ColorRangeText';\r\nimport { Dashes } from './Dashes';\r\nimport { Dots } from './Dots';\r\nimport { LegendLabel } from './LegendLabel';\r\nimport { NumericRangeText } from './NumericRangeText';\r\nimport React, { useMemo } from 'react';\r\nimport styled from 'styled-components';\r\n// TODO: width should flex\r\nconst LEGEND_WIDTH = 260;\r\nconst LEGEND_HEIGHT = 20;\r\nconst LEGEND_ITEMS = 11;\r\nconst RANGE_HEIGHT = 12;\r\n/**\r\n * A compact horizontal legend designed to fit in panel headers.\r\n * @param param0\r\n */\r\nexport const HeaderLegend = ({ label, encoding, colorEncoding, sizeEncoding, opacityEncoding, isUnset, isDashes, isNumeric, }) => {\r\n    return (React.createElement(Container, null,\r\n        React.createElement(LegendLabel, { label: label, binding: encoding.binding, field: encoding.field, fixedValue: `${encoding.value}`, paletteValue: 'from palette', unset: isUnset }),\r\n        !isUnset ? (React.createElement(Legend, null,\r\n            React.createElement(LabeledLegend, { label: label, encoding: encoding, colorEncoding: colorEncoding, sizeEncoding: sizeEncoding, opacityEncoding: opacityEncoding, isDashes: isDashes, isNumeric: isNumeric }))) : null));\r\n};\r\nconst LabeledLegend = ({ encoding, colorEncoding, sizeEncoding, opacityEncoding, isDashes, isNumeric, }) => {\r\n    const fixed = useMemo(() => encoding.binding !== DataBinding.Scaled, [encoding]);\r\n    const height = useMemo(() => (fixed ? LEGEND_HEIGHT : LEGEND_HEIGHT + RANGE_HEIGHT + 4), [fixed]);\r\n    const Marks = isDashes ? Dashes : Dots;\r\n    const rangeText = useRangeText(encoding, isNumeric);\r\n    return (React.createElement(LegendContainer, { width: LEGEND_WIDTH, height: height },\r\n        React.createElement(LegendSection, null,\r\n            React.createElement(Marks, { colorEncoding: colorEncoding, sizeEncoding: sizeEncoding, opacityEncoding: opacityEncoding, width: LEGEND_WIDTH, height: LEGEND_HEIGHT, maxItems: LEGEND_ITEMS })),\r\n        !fixed ? rangeText : null));\r\n};\r\nfunction useRangeText(encoding, isNumeric) {\r\n    return (React.createElement(RangeSection, null, isNumeric ? (React.createElement(NumericRangeText, { includeMidpoint: true, domain: encoding.domain })) : (React.createElement(ColorRangeText, { encoding: encoding, includeMidpoint: true }))));\r\n}\r\nconst Container = styled.div `\r\n\tmargin: 2px;\r\n\tmargin-left: 4px;\r\n`;\r\nconst LegendContainer = styled.div `\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n\twidth: ${({ width }) => width}px;\r\n\theight: ${({ height }) => height}px;\r\n\tpadding: 4px;\r\n\tborder-radius: 2px;\r\n\tcolor: ${({ theme }) => theme.text().fill().hex()};\r\n\tbackground-color: ${({ theme }) => theme.plotArea().fill().hex()};\r\n\tborder: 1px solid ${({ theme }) => theme.plotArea().stroke().hex()};\r\n`;\r\nconst Legend = styled.div `\r\n\tmargin-top: 8px;\r\n\tmargin-bottom: 4px;\r\n`;\r\nconst LegendSection = styled.div `\r\n\theight: ${LEGEND_HEIGHT}px;\r\n`;\r\nconst RangeSection = styled.div `\r\n\theight: ${RANGE_HEIGHT}px;\r\n`;\r\n"]}]}