{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\controls\\HeaderLegend\\Dashes.tsx","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\controls\\HeaderLegend\\Dashes.tsx","mtime":1631029334829},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlTGVnZW5kQ29sb3JTY2FsZSwgdXNlTGVnZW5kTnVtZXJpY1NjYWxlIH0gZnJvbSAnLi9ob29rcyc7CmltcG9ydCB7IHVzZVRoZW1hdGljIH0gZnJvbSAnQHRoZW1hdGljL3JlYWN0JzsKaW1wb3J0IHsgc2NhbGVMaW5lYXIgfSBmcm9tICdkMy1zY2FsZSc7CmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnOwpleHBvcnQgY29uc3QgRGFzaGVzID0gKHsKICBjb2xvckVuY29kaW5nLAogIHNpemVFbmNvZGluZywKICBvcGFjaXR5RW5jb2RpbmcsCiAgd2lkdGggPSAyMDAsCiAgaGVpZ2h0ID0gMTAsCiAgbWF4SXRlbXMgPSAxMCwKICBtYXJnaW4gPSA0Cn0pID0+IHsKICBjb25zdCB0aGVtZSA9IHVzZVRoZW1hdGljKCk7CiAgY29uc3QgY29sb3JTY2FsZSA9IHVzZUxlZ2VuZENvbG9yU2NhbGUoY29sb3JFbmNvZGluZywgbWF4SXRlbXMsIHRoZW1lLmFwcGxpY2F0aW9uKCkuaGlnaENvbnRyYXN0KCkuaGV4KCkpOwogIGNvbnN0IHNpemVTY2FsZSA9IHVzZUxlZ2VuZE51bWVyaWNTY2FsZShzaXplRW5jb2RpbmcsIG1heEl0ZW1zLCA0KTsKICBjb25zdCBvcGFjaXR5U2NhbGUgPSB1c2VMZWdlbmROdW1lcmljU2NhbGUob3BhY2l0eUVuY29kaW5nLCBtYXhJdGVtcywgMC45KTsKICBjb25zdCBkYXNoZXMgPSB1c2VNZW1vKCgpID0+IHsKICAgIC8vIGlubmVyIHdpZHRoIGF2YWlsYmxlIHRvIHRoZSBkYXNoZXMKICAgIGNvbnN0IGlubmVyID0gd2lkdGggLSBtYXJnaW4gKiAyOyAvLyBhbGxvd2FibGUgZGFzaCBzaXplIGdpdmVuIHdpZHRoL21hcmdpbnMKCiAgICBjb25zdCBkdyA9IChpbm5lciAtIG1heEl0ZW1zICogbWFyZ2luKSAvIG1heEl0ZW1zOwogICAgY29uc3QgaGFsZiA9IGR3IC8gMjsgLy8gdGhpcyBzY2FsZSBzaG91bGQgcmV0dXJuIHRoZSBtaWRwb2ludCBvZiBlYWNoIGRhc2gKICAgIC8vIG5vdGUgdGhlID0vLSBoYWxmIGluIHRoZSBhY3R1YWwgeDEveDIgcHJvcHMKCiAgICBjb25zdCB4ID0gc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIG1heEl0ZW1zIC0gMV0pLnJhbmdlKFttYXJnaW4gKyBoYWxmLCB3aWR0aCAtIG1hcmdpbiAtIGhhbGZdKTsKICAgIHJldHVybiBuZXcgQXJyYXkobWF4SXRlbXMpLmZpbGwoMSkubWFwKChfLCBpKSA9PiB7CiAgICAgIGNvbnN0IGNvbG9yID0gY29sb3JTY2FsZShpKTsKICAgICAgY29uc3Qgc2l6ZSA9IHNpemVTY2FsZShpKTsKICAgICAgY29uc3Qgb3BhY2l0eSA9IG9wYWNpdHlTY2FsZShpKTsKICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImxpbmUiLCB7CiAgICAgICAga2V5OiBgZGFzaGVzLSR7Y29sb3J9LSR7c2l6ZX0tJHtvcGFjaXR5fS0ke2l9YCwKICAgICAgICB4MTogeChpKSAtIGhhbGYsCiAgICAgICAgeDI6IHgoaSkgKyBoYWxmLAogICAgICAgIHkxOiBoZWlnaHQgLyAyLAogICAgICAgIHkyOiBoZWlnaHQgLyAyLAogICAgICAgIHN0cm9rZTogY29sb3JTY2FsZShpKSwKICAgICAgICBzdHJva2VXaWR0aDogc2l6ZSwKICAgICAgICBzdHJva2VPcGFjaXR5OiBvcGFjaXR5CiAgICAgIH0pOwogICAgfSk7CiAgfSwgW2hlaWdodCwgd2lkdGgsIG1hcmdpbiwgbWF4SXRlbXMsIGNvbG9yU2NhbGUsIHNpemVTY2FsZSwgb3BhY2l0eVNjYWxlXSk7CgogIGlmIChoZWlnaHQgPD0gMSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgewogICAgd2lkdGg6IHdpZHRoLAogICAgaGVpZ2h0OiBoZWlnaHQKICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KCJnIiwgbnVsbCwgZGFzaGVzKSk7Cn07"},{"version":3,"sources":["C:/ws/graph-drill/src/controls/HeaderLegend/Dashes.tsx"],"names":["useLegendColorScale","useLegendNumericScale","useThematic","scaleLinear","React","useMemo","Dashes","colorEncoding","sizeEncoding","opacityEncoding","width","height","maxItems","margin","theme","colorScale","application","highContrast","hex","sizeScale","opacityScale","dashes","inner","dw","half","x","domain","range","Array","fill","map","_","i","color","size","opacity","createElement","key","x1","x2","y1","y2","stroke","strokeWidth","strokeOpacity"],"mappings":"AAAA,SAASA,mBAAT,EAA8BC,qBAA9B,QAA2D,SAA3D;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,OAAOC,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,OAAO,MAAMC,MAAM,GAAG,CAAC;AAAEC,EAAAA,aAAF;AAAiBC,EAAAA,YAAjB;AAA+BC,EAAAA,eAA/B;AAAgDC,EAAAA,KAAK,GAAG,GAAxD;AAA6DC,EAAAA,MAAM,GAAG,EAAtE;AAA0EC,EAAAA,QAAQ,GAAG,EAArF;AAAyFC,EAAAA,MAAM,GAAG;AAAlG,CAAD,KAA4G;AAC9H,QAAMC,KAAK,GAAGZ,WAAW,EAAzB;AACA,QAAMa,UAAU,GAAGf,mBAAmB,CAACO,aAAD,EAAgBK,QAAhB,EAA0BE,KAAK,CAACE,WAAN,GAAoBC,YAApB,GAAmCC,GAAnC,EAA1B,CAAtC;AACA,QAAMC,SAAS,GAAGlB,qBAAqB,CAACO,YAAD,EAAeI,QAAf,EAAyB,CAAzB,CAAvC;AACA,QAAMQ,YAAY,GAAGnB,qBAAqB,CAACQ,eAAD,EAAkBG,QAAlB,EAA4B,GAA5B,CAA1C;AACA,QAAMS,MAAM,GAAGhB,OAAO,CAAC,MAAM;AACzB;AACA,UAAMiB,KAAK,GAAGZ,KAAK,GAAGG,MAAM,GAAG,CAA/B,CAFyB,CAGzB;;AACA,UAAMU,EAAE,GAAG,CAACD,KAAK,GAAGV,QAAQ,GAAGC,MAApB,IAA8BD,QAAzC;AACA,UAAMY,IAAI,GAAGD,EAAE,GAAG,CAAlB,CALyB,CAMzB;AACA;;AACA,UAAME,CAAC,GAAGtB,WAAW,GAChBuB,MADK,CACE,CAAC,CAAD,EAAId,QAAQ,GAAG,CAAf,CADF,EAELe,KAFK,CAEC,CAACd,MAAM,GAAGW,IAAV,EAAgBd,KAAK,GAAGG,MAAR,GAAiBW,IAAjC,CAFD,CAAV;AAGA,WAAO,IAAII,KAAJ,CAAUhB,QAAV,EAAoBiB,IAApB,CAAyB,CAAzB,EAA4BC,GAA5B,CAAgC,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC7C,YAAMC,KAAK,GAAGlB,UAAU,CAACiB,CAAD,CAAxB;AACA,YAAME,IAAI,GAAGf,SAAS,CAACa,CAAD,CAAtB;AACA,YAAMG,OAAO,GAAGf,YAAY,CAACY,CAAD,CAA5B;AACA,aAAQ5B,KAAK,CAACgC,aAAN,CAAoB,MAApB,EAA4B;AAAEC,QAAAA,GAAG,EAAG,UAASJ,KAAM,IAAGC,IAAK,IAAGC,OAAQ,IAAGH,CAAE,EAA/C;AAAkDM,QAAAA,EAAE,EAAEb,CAAC,CAACO,CAAD,CAAD,GAAOR,IAA7D;AAAmEe,QAAAA,EAAE,EAAEd,CAAC,CAACO,CAAD,CAAD,GAAOR,IAA9E;AAAoFgB,QAAAA,EAAE,EAAE7B,MAAM,GAAG,CAAjG;AAAoG8B,QAAAA,EAAE,EAAE9B,MAAM,GAAG,CAAjH;AAAoH+B,QAAAA,MAAM,EAAE3B,UAAU,CAACiB,CAAD,CAAtI;AAA2IW,QAAAA,WAAW,EAAET,IAAxJ;AAA8JU,QAAAA,aAAa,EAAET;AAA7K,OAA5B,CAAR;AACH,KALM,CAAP;AAMH,GAjBqB,EAiBnB,CAACxB,MAAD,EAASD,KAAT,EAAgBG,MAAhB,EAAwBD,QAAxB,EAAkCG,UAAlC,EAA8CI,SAA9C,EAAyDC,YAAzD,CAjBmB,CAAtB;;AAkBA,MAAIT,MAAM,IAAI,CAAd,EAAiB;AACb,WAAO,IAAP;AACH;;AACD,SAAQP,KAAK,CAACgC,aAAN,CAAoB,KAApB,EAA2B;AAAE1B,IAAAA,KAAK,EAAEA,KAAT;AAAgBC,IAAAA,MAAM,EAAEA;AAAxB,GAA3B,EACJP,KAAK,CAACgC,aAAN,CAAoB,GAApB,EAAyB,IAAzB,EAA+Bf,MAA/B,CADI,CAAR;AAEH,CA5BM","sourcesContent":["import { useLegendColorScale, useLegendNumericScale } from './hooks';\r\nimport { useThematic } from '@thematic/react';\r\nimport { scaleLinear } from 'd3-scale';\r\nimport React, { useMemo } from 'react';\r\nexport const Dashes = ({ colorEncoding, sizeEncoding, opacityEncoding, width = 200, height = 10, maxItems = 10, margin = 4, }) => {\r\n    const theme = useThematic();\r\n    const colorScale = useLegendColorScale(colorEncoding, maxItems, theme.application().highContrast().hex());\r\n    const sizeScale = useLegendNumericScale(sizeEncoding, maxItems, 4);\r\n    const opacityScale = useLegendNumericScale(opacityEncoding, maxItems, 0.9);\r\n    const dashes = useMemo(() => {\r\n        // inner width availble to the dashes\r\n        const inner = width - margin * 2;\r\n        // allowable dash size given width/margins\r\n        const dw = (inner - maxItems * margin) / maxItems;\r\n        const half = dw / 2;\r\n        // this scale should return the midpoint of each dash\r\n        // note the =/- half in the actual x1/x2 props\r\n        const x = scaleLinear()\r\n            .domain([0, maxItems - 1])\r\n            .range([margin + half, width - margin - half]);\r\n        return new Array(maxItems).fill(1).map((_, i) => {\r\n            const color = colorScale(i);\r\n            const size = sizeScale(i);\r\n            const opacity = opacityScale(i);\r\n            return (React.createElement(\"line\", { key: `dashes-${color}-${size}-${opacity}-${i}`, x1: x(i) - half, x2: x(i) + half, y1: height / 2, y2: height / 2, stroke: colorScale(i), strokeWidth: size, strokeOpacity: opacity }));\r\n        });\r\n    }, [height, width, margin, maxItems, colorScale, sizeScale, opacityScale]);\r\n    if (height <= 1) {\r\n        return null;\r\n    }\r\n    return (React.createElement(\"svg\", { width: width, height: height },\r\n        React.createElement(\"g\", null, dashes)));\r\n};\r\n"]}]}