{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\components\\Export\\hooks\\useSaveImage.ts","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\components\\Export\\hooks\\useSaveImage.ts","mtime":1631029334780},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnOwovKioNCiAqIFNhdmVzIGltYWdlIGZyb20gcmVuZGVyZXIgd2hlbiByZXF1ZXN0ZWQuDQogKiBAcGFyYW0gc2F2ZSBJbmRpY2F0ZXMgaWYgdGhlIHJlbmRlcmVyIHNob3VsZCBiZSB1c2VkIHRvIHNhdmUgYW4gaW1hZ2UuDQogKiBAcGFyYW0gc2V0dGluZ3MgSW1hZ2Ugc2V0dGluZ3MgdG8gYXBwbHkgdG8gZG93bmxvYWQuDQogKiBAcGFyYW0gcmVuZGVyZXIgSW5zdGFudGlhdGVkIHJlbmRlcmVyLg0KICogQHBhcmFtIG9uQ29tcGxldGUgQ2FsbGJhY2sgdGhhdCBmaXJlcyB3aGVuIHNhdmUgaXMgY29tcGxldGUuDQogKi8KCmV4cG9ydCBmdW5jdGlvbiB1c2VTYXZlSW1hZ2Uoc2F2ZSwgc2V0dGluZ3MsIHJlbmRlcmVyLCBvbkNvbXBsZXRlKSB7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChyZW5kZXJlciAmJiBzYXZlKSB7CiAgICAgIC8vIG5lZWQgdG8gZm9yY2UgcmVzaXplIG9uIHRoZSByZW5kZXJlciBkaXJlY3RseQogICAgICByZW5kZXJlci5yZXNpemUoc2V0dGluZ3Muc2l6ZSwgc2V0dGluZ3Muc2l6ZSk7CiAgICAgIHJlbmRlcmVyLm1ha2VEaXJ0eSgpOwogICAgICByZW5kZXJlci5yZW5kZXIoKTsKICAgICAgY29uc3QgewogICAgICAgIHZpZXcKICAgICAgfSA9IHJlbmRlcmVyOwogICAgICBjb25zdCBkYXRhID0gdmlldy50b0RhdGFVUkwoJ2ltYWdlL3BuZycsIDEpOwogICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBsaW5rLmRvd25sb2FkID0gc2V0dGluZ3MuZmlsZW5hbWU7CiAgICAgIGxpbmsuaHJlZiA9IGRhdGE7CiAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgb25Db21wbGV0ZSAmJiBvbkNvbXBsZXRlKCk7CiAgICB9CiAgfSwgW3JlbmRlcmVyLCBzYXZlLCBzZXR0aW5ncywgb25Db21wbGV0ZV0pOwp9"},{"version":3,"sources":["C:/ws/graph-drill/src/components/Export/hooks/useSaveImage.ts"],"names":["useEffect","useSaveImage","save","settings","renderer","onComplete","resize","size","makeDirty","render","view","data","toDataURL","link","document","createElement","download","filename","href","click"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,YAAT,CAAsBC,IAAtB,EAA4BC,QAA5B,EAAsCC,QAAtC,EAAgDC,UAAhD,EAA4D;AAC/DL,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAII,QAAQ,IAAIF,IAAhB,EAAsB;AAClB;AACAE,MAAAA,QAAQ,CAACE,MAAT,CAAgBH,QAAQ,CAACI,IAAzB,EAA+BJ,QAAQ,CAACI,IAAxC;AACAH,MAAAA,QAAQ,CAACI,SAAT;AACAJ,MAAAA,QAAQ,CAACK,MAAT;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAWN,QAAjB;AACA,YAAMO,IAAI,GAAGD,IAAI,CAACE,SAAL,CAAe,WAAf,EAA4B,CAA5B,CAAb;AACA,YAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACAF,MAAAA,IAAI,CAACG,QAAL,GAAgBb,QAAQ,CAACc,QAAzB;AACAJ,MAAAA,IAAI,CAACK,IAAL,GAAYP,IAAZ;AACAE,MAAAA,IAAI,CAACM,KAAL;AACAd,MAAAA,UAAU,IAAIA,UAAU,EAAxB;AACH;AACJ,GAdQ,EAcN,CAACD,QAAD,EAAWF,IAAX,EAAiBC,QAAjB,EAA2BE,UAA3B,CAdM,CAAT;AAeH","sourcesContent":["import { useEffect } from 'react';\r\n/**\r\n * Saves image from renderer when requested.\r\n * @param save Indicates if the renderer should be used to save an image.\r\n * @param settings Image settings to apply to download.\r\n * @param renderer Instantiated renderer.\r\n * @param onComplete Callback that fires when save is complete.\r\n */\r\nexport function useSaveImage(save, settings, renderer, onComplete) {\r\n    useEffect(() => {\r\n        if (renderer && save) {\r\n            // need to force resize on the renderer directly\r\n            renderer.resize(settings.size, settings.size);\r\n            renderer.makeDirty();\r\n            renderer.render();\r\n            const { view } = renderer;\r\n            const data = view.toDataURL('image/png', 1);\r\n            const link = document.createElement('a');\r\n            link.download = settings.filename;\r\n            link.href = data;\r\n            link.click();\r\n            onComplete && onComplete();\r\n        }\r\n    }, [renderer, save, settings, onComplete]);\r\n}\r\n"]}]}