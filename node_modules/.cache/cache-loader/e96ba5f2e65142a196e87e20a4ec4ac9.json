{"remainingRequest":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js??ruleSet[1].rules[0].use[1]!C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js??ruleSet[1].rules[0].use[2]!C:\\ws\\graph-drill\\src\\api\\layout.ts","dependencies":[{"path":"C:\\ws\\graph-drill\\src\\api\\layout.ts","mtime":1631029334662},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\cache-loader-virtual-2fd14a2267\\0\\cache\\cache-loader-npm-4.1.0-82c3da90d8-0339778bdd.zip\\node_modules\\cache-loader\\dist\\cjs.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\babel-loader-virtual-fd8dd261de\\0\\cache\\babel-loader-npm-8.2.2-b4e600c2c5-df5092ef98.zip\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\ws\\graph-drill\\.yarn\\__virtual__\\ts-loader-virtual-aa0d54d245\\0\\cache\\ts-loader-npm-9.2.1-40e1a5908e-1f2e61905d.zip\\node_modules\\ts-loader\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQVVUT0xBWU9VVF9VUkwgfSBmcm9tICd+L2NvbnN0YW50cyc7Ci8qKg0KICogVHJhbnNmb3JtcyBhbmQgZWRnZSBsaXN0IHRvIHRoZSBQT1NUIHBheWxvYWQgSlNPTi4NCiAqIEBwYXJhbSBlZGdlcw0KICovCgpmdW5jdGlvbiBlZGdlc1RvUE9TVChlZGdlcykgewogIHJldHVybiBlZGdlcy5tYXAoZSA9PiAoewogICAgc291cmNlOiBlLnNvdXJjZSwKICAgIHRhcmdldDogZS50YXJnZXQsCiAgICB3ZWlnaHQ6IGUud2VpZ2h0CiAgfSkpOwp9CgpmdW5jdGlvbiBjcmVhdGVQT1NUQm9keShlZGdlcykgewogIHJldHVybiB7CiAgICBsYXlvdXRfdHlwZTogJ3VtYXAnLAogICAgLy8gVE9ETzogaXQgY291bGQgYWN0dWFsbHkgYmUgZGlyZWN0ZWQKICAgIGlzX2RpcmVjdGVkOiBmYWxzZSwKICAgIGVkZ2VzOiBlZGdlc1RvUE9TVChlZGdlcykKICB9Owp9CgpleHBvcnQgYXN5bmMgZnVuY3Rpb24gdW1hcExheW91dChlZGdlcykgewogIGNvbnN0IGJvZHkgPSBjcmVhdGVQT1NUQm9keShlZGdlcyk7CiAgcmV0dXJuIGZldGNoKEFVVE9MQVlPVVRfVVJMLCB7CiAgICBtZXRob2Q6ICdQT1NUJywKICAgIG1vZGU6ICdjb3JzJywKICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpCiAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihqc29uID0+IGpzb24ucG9zaXRpb25zLm1hcChwID0+ICh7CiAgICBpZDogcC5ub2RlX2lkLAogICAgeDogcC54LAogICAgeTogcC55LAogICAgZDogcC5zaXplLAogICAgY29tbXVuaXR5OiBgJHtwLmNvbW11bml0eX1gCiAgfSkpKTsKfQ=="},{"version":3,"sources":["C:/ws/graph-drill/src/api/layout.ts"],"names":["AUTOLAYOUT_URL","edgesToPOST","edges","map","e","source","target","weight","createPOSTBody","layout_type","is_directed","umapLayout","body","fetch","method","mode","JSON","stringify","then","res","json","positions","p","id","node_id","x","y","d","size","community"],"mappings":"AAAA,SAASA,cAAT,QAA+B,aAA/B;AACA;AACA;AACA;AACA;;AACA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AACxB,SAAOA,KAAK,CAACC,GAAN,CAAUC,CAAC,KAAK;AACnBC,IAAAA,MAAM,EAAED,CAAC,CAACC,MADS;AAEnBC,IAAAA,MAAM,EAAEF,CAAC,CAACE,MAFS;AAGnBC,IAAAA,MAAM,EAAEH,CAAC,CAACG;AAHS,GAAL,CAAX,CAAP;AAKH;;AACD,SAASC,cAAT,CAAwBN,KAAxB,EAA+B;AAC3B,SAAO;AACHO,IAAAA,WAAW,EAAE,MADV;AAEH;AACAC,IAAAA,WAAW,EAAE,KAHV;AAIHR,IAAAA,KAAK,EAAED,WAAW,CAACC,KAAD;AAJf,GAAP;AAMH;;AACD,OAAO,eAAeS,UAAf,CAA0BT,KAA1B,EAAiC;AACpC,QAAMU,IAAI,GAAGJ,cAAc,CAACN,KAAD,CAA3B;AACA,SAAOW,KAAK,CAACb,cAAD,EAAiB;AACzBc,IAAAA,MAAM,EAAE,MADiB;AAEzBC,IAAAA,IAAI,EAAE,MAFmB;AAGzBH,IAAAA,IAAI,EAAEI,IAAI,CAACC,SAAL,CAAeL,IAAf;AAHmB,GAAjB,CAAL,CAKFM,IALE,CAKGC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALV,EAMFF,IANE,CAMGE,IAAI,IAAIA,IAAI,CAACC,SAAL,CAAelB,GAAf,CAAmBmB,CAAC,KAAK;AACvCC,IAAAA,EAAE,EAAED,CAAC,CAACE,OADiC;AAEvCC,IAAAA,CAAC,EAAEH,CAAC,CAACG,CAFkC;AAGvCC,IAAAA,CAAC,EAAEJ,CAAC,CAACI,CAHkC;AAIvCC,IAAAA,CAAC,EAAEL,CAAC,CAACM,IAJkC;AAKvCC,IAAAA,SAAS,EAAG,GAAEP,CAAC,CAACO,SAAU;AALa,GAAL,CAApB,CANX,CAAP;AAaH","sourcesContent":["import { AUTOLAYOUT_URL } from '~/constants';\r\n/**\r\n * Transforms and edge list to the POST payload JSON.\r\n * @param edges\r\n */\r\nfunction edgesToPOST(edges) {\r\n    return edges.map(e => ({\r\n        source: e.source,\r\n        target: e.target,\r\n        weight: e.weight,\r\n    }));\r\n}\r\nfunction createPOSTBody(edges) {\r\n    return {\r\n        layout_type: 'umap',\r\n        // TODO: it could actually be directed\r\n        is_directed: false,\r\n        edges: edgesToPOST(edges),\r\n    };\r\n}\r\nexport async function umapLayout(edges) {\r\n    const body = createPOSTBody(edges);\r\n    return fetch(AUTOLAYOUT_URL, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        body: JSON.stringify(body),\r\n    })\r\n        .then(res => res.json())\r\n        .then(json => json.positions.map(p => ({\r\n        id: p.node_id,\r\n        x: p.x,\r\n        y: p.y,\r\n        d: p.size,\r\n        community: `${p.community}`,\r\n    })));\r\n}\r\n"]}]}